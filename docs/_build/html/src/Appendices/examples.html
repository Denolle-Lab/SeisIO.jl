

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Appendix E: Web Client Examples &mdash; SeisIO 0.1.0 beta documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="SeisIO 0.1.0 beta documentation" href="../../index.html"/>
        <link rel="prev" title="Appendix D: Web Keywords and Syntax" href="web_syntax.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> SeisIO
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seisdata.html">SeisIO Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Formats/fileformats.html">File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Web/webclients.html">Web Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_list.html">Appendix A: Alphabetical Function List</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisdata_fields.html">Appendix B: Structure and Field Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="seisdata_fileformat.html">Appendix C: SeisIO File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_syntax.html">Appendix D: Web Keywords and Syntax</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Appendix E: Web Client Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fdsn">FDSN</a></li>
<li class="toctree-l2"><a class="reference internal" href="#irisws">IRISws</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seedlink">SeedLink</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">SeisIO</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Appendix E: Web Client Examples</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/src/Appendices/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="appendix-e-web-client-examples">
<span id="webex"></span><h1>Appendix E: Web Client Examples<a class="headerlink" href="#appendix-e-web-client-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fdsn">
<h2>FDSN<a class="headerlink" href="#fdsn" title="Permalink to this headline">¶</a></h2>
<p>1. Download 10 minutes of data from four stations at Mt. St. Helens (WA, USA), delete the low-gain channels, and save as SAC files in the current directory.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FDSNget</span><span class="p">(</span><span class="s2">&quot;CC.VALT, UW.SEP, UW.SHW, UW.HSR&quot;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
<span class="n">S</span> <span class="o">-=</span> <span class="s2">&quot;SHW.ELZ..UW&quot;</span>
<span class="n">S</span> <span class="o">-=</span> <span class="s2">&quot;HSR.ELZ..UW&quot;</span>
<span class="n">writesac</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<p>2. Get seismic and strainmeter records for the P-wave of the Tohoku-Oki great earthquake on two borehole stations and write to native SeisData format.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FDSNevt</span><span class="p">(</span><span class="s2">&quot;201103110547&quot;</span><span class="p">,</span> <span class="s2">&quot;PB.B004..EH?,PB.B004..BS?,PB.B001..BS?,PB.B001..EH?&quot;</span><span class="p">)</span>
<span class="n">wseis</span><span class="p">(</span><span class="s2">&quot;201103110547_evt.seis&quot;</span><span class="p">,</span> <span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<p>3. 5 stations, 2 networks, all channels, data from the last 600 seconds</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CHA</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CC.PALM, UW.HOOD, UW.TIMB, CC.HIYU, UW.TDH&quot;</span><span class="p">]</span>
<span class="n">TS</span> <span class="o">=</span> <span class="n">u2d</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>
<span class="n">TT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">600</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">FDSNget</span><span class="p">(</span><span class="n">CHA</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TT</span><span class="p">)</span>
</pre></div>
</div>
<p>4. An FDSN station query</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FDSNsta</span><span class="p">(</span><span class="s2">&quot;CC.VALT..,PB.B001..BS?,PB.B001..E??&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>A request to FDSN Potsdam, not synchronized, with some verbosity</li>
</ol>
<dl class="docutils">
<dt>::</dt>
<dd>ts = &#8220;2011-03-11T06:00:00&#8221;
te = &#8220;2011-03-11T06:05:00&#8221;
R = FDSNget(&#8220;GE.BKB..BH?&#8221;, src=&#8221;GFZ&#8221;, s=ts, t=te, v=1, y=false)</dd>
</dl>
</div>
<div class="section" id="irisws">
<h2>IRISws<a class="headerlink" href="#irisws" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Get synchronized trace data from IRISws from <code class="docutils literal"><span class="pre">TS</span></code> to <code class="docutils literal"><span class="pre">TE</span></code> at channels <code class="docutils literal"><span class="pre">C</span></code></li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">IRISget</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TE</span><span class="p">)</span>
</pre></div>
</div>
<p>2. Get desynchronized trace data from IRISws with a 5-second timeout on HTTP requests, written directly to disk.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">IRISget</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TE</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">false</span><span class="p">,</span> <span class="n">vto</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
<p>3. Request 10 minutes of continuous vertical-component data from a small May 2016 earthquake swarm at Mt. Hood, OR, USA:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">STA</span> <span class="o">=</span> <span class="s2">&quot;UW.HOOD.--.BHZ,CC.TIMB.--.EHZ&quot;</span>
<span class="n">TS</span> <span class="o">=</span> <span class="s2">&quot;2016-05-16T14:50:00&quot;</span><span class="p">;</span> <span class="n">TE</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">IRISget</span><span class="p">(</span><span class="n">STA</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">TS</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">TE</span><span class="p">)</span>
</pre></div>
</div>
<p>4. Iris web service, single station, written to miniseed</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">seis</span> <span class="o">=</span> <span class="n">irisws</span><span class="p">(</span><span class="s2">&quot;CC.TIMB..EHZ&quot;</span><span class="p">,</span> <span class="n">t</span><span class="o">=-</span><span class="mi">300</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;miniseed&quot;</span><span class="p">)</span>
<span class="n">writesac</span><span class="p">(</span><span class="n">seis</span><span class="p">)</span>
</pre></div>
</div>
<p>5. IRISget example: 6 channels, 10 minutes, synchronized, saved in SeisIO format&#8221;</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">STA</span> <span class="o">=</span> <span class="s2">&quot;UW.HOOD..BH?, CC.TIMB..EH?&quot;</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">Dates</span><span class="o">.</span><span class="n">DateTime</span><span class="p">(</span><span class="n">Dates</span><span class="o">.</span><span class="n">year</span><span class="p">(</span><span class="n">now</span><span class="p">()))</span>
<span class="n">T</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">seis</span> <span class="o">=</span> <span class="n">IRISget</span><span class="p">(</span><span class="n">STA</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">T</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>
<span class="n">wseis</span><span class="p">(</span><span class="n">seis</span><span class="p">,</span> <span class="s2">&quot;20160516145000.data.seis&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>6. Grabbing data from a predetermined time window in two different formats</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="s2">&quot;2016-03-23T23:10:00&quot;</span>
<span class="n">te</span> <span class="o">=</span> <span class="s2">&quot;2016-03-23T23:17:00&quot;</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">irisws</span><span class="p">(</span><span class="s2">&quot;CC.JRO..BHZ&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">te</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;sacbl&quot;</span><span class="p">)</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">irisws</span><span class="p">(</span><span class="s2">&quot;CC.JRO..BHZ&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">te</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;miniseed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="seedlink">
<h2>SeedLink<a class="headerlink" href="#seedlink" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>An attended SeedLink session in DATA mode. Initiate a SeedLink session in DATA mode using config file SL.conf and write all packets received directly to file (in addition to parsing to S itself). Set nominal refresh interval for checking for new data to 10 s. A mini-seed file will be generated automatically.</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>S = SeisData()
SeedLink!(S, &quot;SL.conf&quot;, mode=&quot;DATA&quot;, r=10, w=true)
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>An unattended SeedLink download in TIME mode. Get the next two minutes of data from stations GPW, MBW, SHUK in the UW network. Put the Julia REPL to sleep while the request fills. If the connection is still open, close it (SeedLink&#8217;s time bounds arent precise in TIME mode, so this may or may not be necessary). Pause briefly so that the last data packets are written. Synchronize results and write data in native SeisIO file format.</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>sta = &quot;UW.GPW,UW.MBW,UW.SHUK&quot;
s0 = now()
S = SeedLink(sta, mode=&quot;TIME&quot;, s=s0, t=120, r=10)
sleep(180)
isopen(S.c[1]) &amp;&amp; close(S.c[1])
sleep(20)
sync!(S)
fname = string(&quot;GPW_MBW_SHUK&quot;, s0, &quot;.seis&quot;)
wseis(fname, S)
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>A SeedLink session in TIME mode</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sta</span> <span class="o">=</span> <span class="s2">&quot;UW.GPW, UW.MBW, UW.SHUK&quot;</span>
<span class="n">S1</span> <span class="o">=</span> <span class="n">SeedLink</span><span class="p">(</span><span class="n">sta</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;TIME&quot;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>A SeedLink session in DATA mode with multiple servers, including a config file. Data are parsed roughly every 10 seconds. A total of 5 minutes of data are requested.</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>sta = [&quot;CC.SEP&quot;, &quot;UW.HDW&quot;]
# To ensure precise timing, we&#39;ll pass d0 and d1 as strings
st = 0.0
en = 300.0
dt = en-st
(d0,d1) = parsetimewin(st,en)

S = SeisData()
SeedLink!(S, sta, mode=&quot;TIME&quot;, r=10.0, s=d0, t=d1)
println(STDOUT, &quot;...first link initialized...&quot;)

# Seedlink with a config file
config_file = &quot;seedlink.conf&quot;
SeedLink!(S, config_file, r=10.0, mode=&quot;TIME&quot;, s=d0, t=d1)
println(STDOUT, &quot;...second link initialized...&quot;)

# Seedlink with a config string
SeedLink!(S, &quot;CC.VALT..???, UW.ELK..EHZ&quot;, mode=&quot;TIME&quot;, r=10.0, s=d0, t=d1)
println(STDOUT, &quot;...third link initialized...&quot;)
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="web_syntax.html" class="btn btn-neutral" title="Appendix D: Web Keywords and Syntax" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Joshua Jones.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0 beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>